# ========================================
# AscultiCor Environment Configuration
# ========================================
# üîí SECURITY WARNING: This file contains sensitive credentials.
#    - Never commit the actual .env file to version control
#    - Keep .env in .gitignore at all times
#    - Rotate keys immediately if accidentally exposed
#    - Use strong, unique passwords for production
#
# Setup Instructions:
# 1. Copy this file to .env:  cp .env.example .env
# 2. Fill in your actual values in .env (NOT in this example file!)
# 3. Never share or commit your .env file
# ========================================

# ========================================
# SUPABASE (Required)
# ========================================
# Get these from your Supabase project settings:
# https://app.supabase.com/project/_/settings/api
#
# SECURITY: The SERVICE_ROLE_KEY has full admin access!
# - Only use it in secure backend services (inference/)
# - Never expose it in frontend code or to users
# - Rotate immediately if compromised

SUPABASE_URL=https://your-project.supabase.co
SUPABASE_ANON_KEY=your-anon-key-here
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key-here

# ========================================
# MQTT Broker (Local Development)
# ========================================
# Default credentials for local Mosquitto broker
# üîí CHANGE THESE FOR PRODUCTION!
# - Use strong, unique passwords (16+ characters)
# - Enable TLS/SSL in production
# - Consider client certificate authentication
# - Implement username/password rotation

MQTT_USERNAME=asculticor
MQTT_PASSWORD=change-me-in-production-use-strong-password

# ========================================
# ML Model Settings (Optional - Has Defaults)
# ========================================

# PCG (Phonocardiogram) Settings
PCG_SAMPLE_RATE=22050
PCG_TARGET_DURATION=10
PCG_MAX_DURATION=15

# ECG (Electrocardiogram) Settings
ECG_SAMPLE_RATE=500
ECG_WINDOW_SIZE=500
ECG_MAX_DURATION=60

# Processing Configuration
STREAM_TIMEOUT_SEC=10
METRICS_UPDATE_HZ=2

# ========================================
# Demo Mode (Development Only)
# ========================================
# ‚ö†Ô∏è  SECURITY: Disable in production!
# If true, uses mock ML outputs when models are missing.
# This bypasses real inference and should NEVER be enabled
# in production environments.

ENABLE_DEMO_MODE=true

# ========================================
# Logging
# ========================================
# SECURITY: Be careful with DEBUG logging in production
# as it may expose sensitive data (credentials, PII, etc.)
LOG_LEVEL=INFO

# Internal API token (for scheduled/background LLM processing endpoint)
# Generate with: openssl rand -hex 32
INTERNAL_API_TOKEN=replace-with-a-long-random-token

# ========================================
# CORS (Frontend URL)
# ========================================
# SECURITY: Restrict to your actual domains in production
# - Never use "*" (allow all origins) in production
# - List specific origins separated by commas
# - Include both http and https variants if needed

ALLOWED_ORIGINS=http://localhost:3000,http://localhost:3001

# ========================================
# Rate Limiting (Production Security)
# ========================================
# Protects against brute force and DoS attacks
# Format: requests per minute
RATE_LIMIT_REQUESTS_PER_MINUTE=60
RATE_LIMIT_AUTH_REQUESTS_PER_MINUTE=5

# ========================================
# Security Headers
# ========================================
# Enable additional security headers
SECURITY_HEADERS_ENABLED=true

# Content Security Policy (CSP)
# Restricts where resources can be loaded from
CSP_POLICY="default-src 'self'; script-src 'self' 'unsafe-inline' 'unsafe-eval'; style-src 'self' 'unsafe-inline'; img-src 'self' data: https:; font-src 'self' data:; connect-src 'self' https://*.supabase.co;"

# ========================================
# AWS Production Settings (Optional)
# ========================================
# Uncomment and configure for production deployment with AWS IoT
# SECURITY: Use IAM roles when possible instead of access keys

# AWS_REGION=us-east-1
# AWS_IOT_ENDPOINT=xxxxxxxxxxxxx-ats.iot.us-east-1.amazonaws.com
# AWS_ACCESS_KEY_ID=your-access-key-id
# AWS_SECRET_ACCESS_KEY=your-secret-access-key

# ========================================
# LLM Integration (Optional)
# ========================================
# For enhanced AI-generated clinical reports
# SECURITY: Store API keys securely (AWS Secrets Manager, etc.)
# If not provided, uses fallback template-based reports

# OPENAI_API_KEY=sk-your-openai-api-key-here
# OPENAI_MODEL=gpt-4

# GOOGLE_API_KEY=your-google-api-key-here
# GEMINI_MODEL=gemini-pro

# ========================================
# Monitoring & Alerting (Optional)
# ========================================
# SENTRY_DSN=https://your-sentry-dsn-here
# LOGDNA_INGESTION_KEY=your-logdna-key

# ========================================
# Backup & Recovery
# ========================================
# Database backup configuration
# BACKUP_ENABLED=true
# BACKUP_RETENTION_DAYS=30
# BACKUP_SCHEDULE=0 2 * * *  # Daily at 2 AM
